{"ast":null,"code":"import _classCallCheck from \"/Users/catherineli/Documents/GitHub/webapps2019/react_app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/catherineli/Documents/GitHub/webapps2019/react_app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/catherineli/Documents/GitHub/webapps2019/react_app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/catherineli/Documents/GitHub/webapps2019/react_app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/catherineli/Documents/GitHub/webapps2019/react_app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/catherineli/Documents/GitHub/webapps2019/react_app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/catherineli/Documents/GitHub/webapps2019/react_app/src/Medicine.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField'; // import moment from \"moment\";\n\nimport moment from \"moment-timezone\";\n\nvar Medicine =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Medicine, _Component);\n\n  function Medicine(props) {\n    var _this;\n\n    _classCallCheck(this, Medicine);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Medicine).call(this, props));\n\n    _this.handleClickOpen = function () {\n      if (_this.state.color !== '#6ADC83') {\n        _this.setState({\n          open: true\n        });\n      }\n    };\n\n    _this.handleCancel = function () {\n      _this.setState({\n        open: false\n      });\n\n      _this.setState({\n        cancel: true\n      });\n    };\n\n    _this.handleCancelReward = function () {\n      _this.setState({\n        showReward: false\n      });\n    };\n\n    _this.handleOK = function () {\n      console.log(_this.state.color);\n\n      _this.changeColor();\n\n      _this.setState({\n        cancel: false\n      });\n    };\n\n    _this.handleOKReward = function () {\n      _this.setState({\n        showReward: false\n      });\n    };\n\n    _this.state = {\n      color: '',\n      open: false,\n      textFieldValue: '',\n      cancel: '',\n      showReward: false,\n      hide: true\n    };\n    _this.changeColor = _this.changeColor.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleClickOpen = _this.handleClickOpen.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleOK = _this.handleOK.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleCancel = _this.handleCancel.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleTextFieldChange = _this.handleTextFieldChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleOKReward = _this.handleOKReward.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleCancelReward = _this.handleCancelReward.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.server = \"http://localhost:5000\";\n    return _this;\n  }\n\n  _createClass(Medicine, [{\n    key: \"handleTextFieldChange\",\n    value: function handleTextFieldChange(e) {\n      this.setState({\n        textFieldValue: e.target.value\n      });\n    }\n  }, {\n    key: \"changeColor\",\n    value: function changeColor() {\n      var _this2 = this;\n\n      // CATH: change this.state.color === \"#6ADC83\"\n      // if (this.state.color === '#4AB3F4'){\n      //   return;\n      // }\n      console.log(this.state.color);\n\n      if (this.state.color === '#6ADC83') {\n        return;\n      }\n\n      var today = new Date();\n      today.setHours(0, 0, 0, 0);\n      today = moment(today).tz(\"America/New_York\").format(\"YYYY/MM/DD\");\n      fetch(this.server + \"/verifyPassword\", {\n        mode: 'cors',\n        credentials: 'include',\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Credentials': true\n        },\n        body: JSON.stringify({\n          password: this.state.textFieldValue\n        })\n      }).then(function (res) {\n        return res.text();\n      }).then(function (data) {\n        if (data === \"Wrong password\") {\n          _this2.setState({\n            hide: false\n          });\n\n          return;\n        }\n\n        console.log(data);\n\n        if (data === \"OK\") {\n          fetch(_this2.server + \"/addDate\", {\n            mode: 'cors',\n            credentials: 'include',\n            method: 'POST',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json',\n              'Access-Control-Allow-Credentials': true\n            },\n            body: JSON.stringify({\n              medicine: _this2.props.med,\n              date: today\n            })\n          }).then(function (res) {\n            return res.text();\n          }).then(function (data) {\n            if (data === \"equal\") {\n              _this2.props.rerenderParentCallbackDates();\n\n              fetch(_this2.server + \"/incrementReward\", {\n                mode: 'cors',\n                credentials: 'include',\n                method: 'POST',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Credentials': true\n                }\n              }).then(function (res) {\n                return res.text();\n              }).then(function (data) {\n                if (data === \"goal\") {\n                  // make a post to set all the checked for today to false??\n                  _this2.setState({\n                    showReward: true\n                  });\n\n                  _this2.props.rerenderParentCallback();\n\n                  console.log(\"The reward should be deleted.\");\n                }\n              });\n            }\n          }); // change the checked to true ^\n          // is totla num medicatoin = num blue circs??\n          // then tell to increment rewards.\n\n          var newColor; //CATH: change newColor to #6ADC83 (green)\n          //   newColor = '#4AB3F4';\n\n          newColor = '#6ADC83';\n\n          _this2.setState({\n            color: newColor,\n            open: false\n          });\n        }\n      }).catch(function (err) {\n        // handle err\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      console.log(\"Medicine componentDidMount\");\n      var today = new Date(); // var dd = String(today.getDate()).padStart(2, '0');\n      // var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n      // var yyyy = today.getFullYear();\n      // today = mm + '/' + dd + '/' + yyyy;\n\n      var getDate = moment(today).tz(\"America/New_York\").format(\"YYYY/MM/DD\");\n      console.log(\"THIS IS THE MEDNAME SENT TO THE SERVER\", this.props.med);\n      fetch(this.server + \"/getDate?name=\" + this.props.med, {\n        mode: 'cors',\n        credentials: 'include',\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Credentials': true\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        var dates = [];\n        console.log(\"full data\", data);\n\n        if (typeof data[0] != 'undefined') {\n          for (var x in data[0].dates) {\n            // var d = new Date(data[0].dates[x]);\n            var d = data[0].dates[x];\n            console.log(\"Please be the correct thing\", d);\n            var momentd = moment(new Date(d)).tz(\"America/New_York\").format('YYYY/MM/DD'); // let momentd = moment(d).tz(\"America/New_York\").format(\"YYYY/MM/DD\");\n\n            dates.push(momentd);\n          }\n        }\n\n        console.log(\"the actual dates\", dates); // console.log(data[0])\n        //  var d = new Date(data[0].dates[0])\n        //  console.log(d)\n        // // uhh this has to be changed too\n        //\n        // //console.log(data[0].dates)\n        // var dates = data[0].dates\n        // cut all of the dates stuff off\n        // today = new Date()\n        // today.setHours(0, 0, 0, 0)\n        //\n        // //console.log(dates)\n\n        console.log(_this3.props.med, \" ALL DATES\", dates);\n        console.log(\"TODAY\", getDate); // console.log(\"IS TODAY IN DATES?\", dates.includes(getDate))\n\n        if (dates.includes(getDate)) {\n          //  CATH: change color: to color: #6ADC83\n          //return this.setState({color: '#4AB3F4'})\n          console.log(\"check off med, color it green\");\n          return _this3.setState({\n            color: '#6ADC83'\n          });\n        } else {\n          console.log(\"meds aren't checked off, color it white\"); // make a post to set to false!\n\n          return _this3.setState({\n            color: 'white'\n          });\n        }\n      }); // this.props.rerenderParentCallbackMedicine();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.state.color);\n      return React.createElement(\"div\", {\n        className: \"wrappp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"one-medicine\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(Dialog, {\n        open: this.state.open,\n        onClose: this.handleCancel,\n        \"aria-labelledby\": \"alert-dialog-title\",\n        \"aria-describedby\": \"alert-dialog-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        id: \"alert-dialog-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, \"Please enter a password.\"), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, React.createElement(DialogContentText, {\n        id: \"alert-dialog-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, \"To check off your medication a password is required.\"), React.createElement(TextField, {\n        autoFocus: true,\n        margin: \"dense\" // id=\"name\"\n        ,\n        label: \"Password\",\n        value: this.state.textFieldValue,\n        onChange: this.handleTextFieldChange,\n        type: \"password\",\n        fullWidth: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: this.state.hide ? 'hidden' : 'show',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, \"Your password is not correct.\"), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleCancel,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, \"Cancel\"), React.createElement(Button, {\n        onClick: this.handleOK,\n        color: \"primary\",\n        autoFocus: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, \"OK\"))), React.createElement(\"div\", {\n        className: \"circly\",\n        onClick: this.handleClickOpen,\n        style: {\n          background: this.state.color\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, \" \"), React.createElement(\"p\", {\n        className: \"medicine-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, \" \", this.props.med)));\n    }\n  }]);\n\n  return Medicine;\n}(Component);\n\nexport default Medicine;","map":{"version":3,"sources":["/Users/catherineli/Documents/GitHub/webapps2019/react_app/src/Medicine.js"],"names":["React","Component","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Button","TextField","moment","Medicine","props","handleClickOpen","state","color","setState","open","handleCancel","cancel","handleCancelReward","showReward","handleOK","console","log","changeColor","handleOKReward","textFieldValue","hide","bind","handleTextFieldChange","server","e","target","value","today","Date","setHours","tz","format","fetch","mode","credentials","method","headers","body","JSON","stringify","password","then","res","text","data","medicine","med","date","rerenderParentCallbackDates","rerenderParentCallback","newColor","catch","err","getDate","json","dates","x","d","momentd","push","includes","background"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n// import moment from \"moment\";\nimport moment from \"moment-timezone\";\n\n\nclass Medicine extends Component {\n    constructor (props){\n        super(props)\n\n        this.state = {\n            color: '',\n            open: false,\n            textFieldValue: '',\n            cancel: '',\n            showReward: false,\n            hide: true\n        }\n\n        this.changeColor = this.changeColor.bind(this);\n        this.handleClickOpen = this.handleClickOpen.bind(this);\n        this.handleOK = this.handleOK.bind(this);\n        this.handleCancel = this.handleCancel.bind(this);\n        this.handleTextFieldChange = this.handleTextFieldChange.bind(this);\n        this.handleOKReward = this.handleOKReward.bind(this);\n        this.handleCancelReward = this.handleCancelReward.bind(this);\n\n        this.server = \"http://localhost:5000\";\n    }\n\n    handleTextFieldChange(e) {\n      this.setState({\n          textFieldValue: e.target.value\n      });\n    }\n\n    changeColor(){\n        // CATH: change this.state.color === \"#6ADC83\"\n      // if (this.state.color === '#4AB3F4'){\n      //   return;\n      // }\n      console.log(this.state.color)\n\n        if (this.state.color === '#6ADC83'){\n            return;\n        }\n\n        var today = new Date();\n        today.setHours(0, 0, 0, 0);\n        today = moment(today).tz(\"America/New_York\").format(\"YYYY/MM/DD\");\n\n      fetch(this.server + \"/verifyPassword\", {\n          mode: 'cors',\n          credentials: 'include',\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Credentials': true,\n          },\n            body: JSON.stringify({\n              password: this.state.textFieldValue,\n            })\n          })\n          .then(res => res.text())\n          .then(data => {\n            if (data === \"Wrong password\"){\n              this.setState({hide: false});\n              return;\n            }\n\n            console.log(data)\n            if (data === \"OK\"){\n              fetch(this.server + \"/addDate\", {\n                  mode: 'cors',\n                  credentials: 'include',\n                  method: 'POST',\n                  headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                    'Access-Control-Allow-Credentials': true,\n                  },\n                    body: JSON.stringify({\n                      medicine: this.props.med,\n                        date: today,\n                    })\n                  })\n                  .then(res => res.text())\n                  .then(data => {\n                    if (data === \"equal\"){\n                      this.props.rerenderParentCallbackDates();\n\n                      fetch(this.server + \"/incrementReward\", {\n                          mode: 'cors',\n                          credentials: 'include',\n                          method: 'POST',\n                          headers: {\n                            'Accept': 'application/json',\n                            'Content-Type': 'application/json',\n                            'Access-Control-Allow-Credentials': true,\n                          },\n                          })\n                          .then(res => res.text())\n                          .then(data => {\n                            if (data === \"goal\"){\n                              // make a post to set all the checked for today to false??\n                              this.setState({showReward: true})\n                              this.props.rerenderParentCallback();\n\n                              console.log(\"The reward should be deleted.\");\n                            }\n\n                          });\n                    }\n\n                  });\n                  // change the checked to true ^\n\n\n              // is totla num medicatoin = num blue circs??\n                // then tell to increment rewards.\n\n              var newColor;\n              //CATH: change newColor to #6ADC83 (green)\n              //   newColor = '#4AB3F4';\n              newColor = '#6ADC83';\n              this.setState({color: newColor, open: false});\n            }\n          }).catch(err => {\n            // handle err\n            console.log(err)\n          })\n\n    }\n\n    componentDidMount(){\n      console.log(\"Medicine componentDidMount\");\n      var today = new Date();\n      // var dd = String(today.getDate()).padStart(2, '0');\n      // var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n      // var yyyy = today.getFullYear();\n\n      // today = mm + '/' + dd + '/' + yyyy;\n      let getDate = moment(today).tz(\"America/New_York\").format(\"YYYY/MM/DD\");\n      console.log(\"THIS IS THE MEDNAME SENT TO THE SERVER\" , this.props.med)\n\n      fetch(this.server + \"/getDate?name=\" + this.props.med, {\n          mode: 'cors',\n          credentials: 'include',\n          method: 'GET',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Credentials': true,\n          },\n      })\n      .then(res => res.json())\n      .then(data => {\n\n        var dates = []\n          console.log(\"full data\", data)\n\n        if (typeof data[0] != 'undefined'){\n          for (var x in data[0].dates){\n\n            // var d = new Date(data[0].dates[x]);\n              var d = data[0].dates[x];\n              console.log(\"Please be the correct thing\", d)\n              let momentd = moment(new Date(d)).tz(\"America/New_York\").format('YYYY/MM/DD')\n            // let momentd = moment(d).tz(\"America/New_York\").format(\"YYYY/MM/DD\");\n            dates.push(momentd);\n          }\n        }\n        console.log(\"the actual dates\", dates)\n\n        // console.log(data[0])\n        //  var d = new Date(data[0].dates[0])\n        //  console.log(d)\n        // // uhh this has to be changed too\n        //\n        // //console.log(data[0].dates)\n        // var dates = data[0].dates\n\n        // cut all of the dates stuff off\n        // today = new Date()\n        // today.setHours(0, 0, 0, 0)\n        //\n        // //console.log(dates)\n          console.log(this.props.med, \" ALL DATES\", dates)\n          console.log(\"TODAY\", getDate)\n          // console.log(\"IS TODAY IN DATES?\", dates.includes(getDate))\n        if (dates.includes(getDate)){\n          //  CATH: change color: to color: #6ADC83\n          //return this.setState({color: '#4AB3F4'})\n            console.log(\"check off med, color it green\")\n            return this.setState({color: '#6ADC83'})\n        }\n        else {\n            console.log(\"meds aren't checked off, color it white\")\n          // make a post to set to false!\n          return this.setState({color: 'white'})\n        }\n      });\n\n      // this.props.rerenderParentCallbackMedicine();\n    }\n\n  handleClickOpen = () => {\n    if (this.state.color !== '#6ADC83'){\n      this.setState({ open: true });\n    }\n  };\n\n  handleCancel = () => {\n    this.setState({ open: false });\n    this.setState({ cancel: true });\n  };\n\n  handleCancelReward = () => {\n    this.setState({ showReward: false });\n  };\n\n  handleOK = () => {\n    console.log(this.state.color)\n    this.changeColor();\n\n    this.setState({ cancel: false });\n  };\n\n  handleOKReward = () => {\n    this.setState({ showReward: false });\n  };\n\n\n  render(){\n    console.log(this.state.color)\n    return (\n\n    <div className=\"wrappp\">\n      <div className = \"one-medicine\">\n\n      \n\n      <Dialog\n        open={this.state.open}\n        onClose={this.handleCancel}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{\"Please enter a password.\"}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            To check off your medication a password is required.\n          </DialogContentText>\n          <TextField\n              autoFocus\n              margin=\"dense\"\n              // id=\"name\"\n              label=\"Password\"\n              value={this.state.textFieldValue} onChange={this.handleTextFieldChange}\n              type=\"password\"\n              fullWidth\n            />\n        </DialogContent>\n          <div className={this.state.hide ? 'hidden' : 'show'}>\n            Your password is not correct.\n          </div>\n        <DialogActions>\n          <Button onClick={this.handleCancel} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={this.handleOK} color=\"primary\" autoFocus>\n            OK\n          </Button>\n        </DialogActions>\n      </Dialog>\n        <div className = \"circly\" onClick ={this.handleClickOpen} style ={{background: this.state.color}}> </div>\n        <p className=\"medicine-title\"> {this.props.med}</p>\n      </div>\n    </div>\n\n    );\n  }\n}\n\nexport default Medicine;\n"]},"metadata":{},"sourceType":"module"}